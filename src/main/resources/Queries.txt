CREATE TABLE priority (
    priority_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    priority_status VARCHAR(50) NOT NULL UNIQUE
);


CREATE TABLE roles (
    role_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    designation VARCHAR(50) NOT NULL UNIQUE
);

CREATE TABLE status (
    status_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    status_level VARCHAR(50) NOT NULL UNIQUE
);

CREATE TABLE tasks (
    task_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(100) NOT NULL,
    description TEXT,
    status_id BIGINT,
    priority_id BIGINT,
    due_Date DATE,
    created_Date DATE,
    completed_Date DATE,
    modified_Date DATE,
    is_active BOOLEAN NOT NULL DEFAULT true,
    FOREIGN KEY (status_id) REFERENCES status (status_id),
    FOREIGN KEY (priority_id) REFERENCES priority (priority_id)
);

CREATE TABLE user_detail (
    user_id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_name VARCHAR(50) NOT NULL UNIQUE,
    user_mail VARCHAR(150) NOT NULL UNIQUE,
    password VARCHAR(50) NOT NULL,
    designation BIGINT,
    is_active BOOLEAN NOT NULL DEFAULT true,
    FOREIGN KEY (designation) REFERENCES roles (role_id)
);


CREATE TABLE tasks_users (
    task_id BIGINT,
    user_id BIGINT,
    PRIMARY KEY (task_id, user_id),
    FOREIGN KEY (task_id) REFERENCES tasks (task_id),
    FOREIGN KEY (user_id) REFERENCES user_detail (user_id)
);


--For Assigned tasks

SELECT *
FROM tasks
JOIN tasks_users ON tasks.task_id = tasks_users.task_id
JOIN user_detail ON tasks_users.user_id = user_detail.user_id
WHERE user_detail.user_id = 1;

--For Assigned Users

SELECT *
FROM user_detail
JOIN tasks_users ON user_detail.user_id = tasks_users.user_id
JOIN tasks ON tasks_users.task_id = tasks.task_id
WHERE tasks.task_id = 1;






 @Override
    public String getAuthority() {
       return roleId.getDesignation();
    }

    @Override
    public Collection<? extends GrantedAuthority> getAuthorities() {
        return Collections.singletonList(new SimpleGrantedAuthority(roleId.getDesignation()));
    }

    @Override
    public String getUsername() {
        return this.userMail;
    }

    @Override
    public String getPassword() {
        return this.password;
    }

    

    @Override
    public boolean isAccountNonExpired() {
      
        return true;
    }

    @Override
    public boolean isAccountNonLocked() {
       return true;
    }

    @Override
    public boolean isCredentialsNonExpired() {
       return true;
    }

    @Override
    public boolean isEnabled() {
        return true;
    }